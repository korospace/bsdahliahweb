function doValidateNasabah(){let a=!0;return $(".form-control").removeClass("is-invalid"),$(".text-danger").html(""),""==$("#nasabah-username-or-email").val()&&($("#nasabah-username-or-email").addClass("is-invalid"),$("#nasabah-username-or-email-error").html("*username/email harus di isi"),a=!1),""==$("#nasabah-password").val()&&($("#nasabah-password").addClass("is-invalid"),$("#nasabah-password-error").html("*password harus di isi"),a=!1),a}function doValidateAdmin(a){let e=!0;return $(".form-control").removeClass("is-invalid"),$(".text-danger").html(""),""==$("#admin-username").val()&&($("#admin-username").addClass("is-invalid"),$("#admin-username-error").html("*username harus di isi"),e=!1),""==$("#admin-password").val()&&($("#admin-password").addClass("is-invalid"),$("#admin-password-error").html("*password harus di isi"),e=!1),e}$("#formLoginNasabah").on("submit",function(a){if(a.preventDefault(),doValidateNasabah()){showLoadingSpinner();let e=new FormData(a.target);axios.post(`${APIURL}/login/nasabah`,e,{headers:{}}).then(a=>{hideLoadingSpinner(),document.cookie=`token=${a.data.token}; path=/;SameSite=None; Secure`,window.location.replace(`${BASEURL}/nasabah`)}).catch(a=>{hideLoadingSpinner(),404==a.response.status?a.response.data.messages.username_or_email?($("#nasabah-username-or-email").addClass("is-invalid"),$("#nasabah-username-or-email-error").text(a.response.data.messages.username_or_email)):a.response.data.messages.password&&($("#nasabah-password").addClass("is-invalid"),$("#nasabah-password-error").text(a.response.data.messages.password)):401==a.response.status?"account is not verify"==a.response.data.messages?setTimeout(()=>{Swal.fire({icon:"warning",title:"LOGIN GAGAL!",text:"akun anda belum ter-verifikasi. silahkan verifikasi akun terlebih dahulu",confirmButtonText:"ok"}).then(()=>{var a=BASEURL+"/otp",s=$('<form action="'+a+'" method="post"><input type="text" name="username_or_email" value="'+e.get("username_or_email")+'" /><input type="text" name="password" value="'+e.get("password")+'" /></form>');$("body").append(s),s.submit()})},300):"akun tidak aktif"==a.response.data.messages&&showAlert({message:"<strong>Maaf . . .</strong> akun anda sedang di Non-aktifkan!",autohide:!0,type:"warning"}):500==a.response.status&&showAlert({message:"<strong>Ups . . .</strong> terjadi kesalahan, coba sekali lagi!",autohide:!0,type:"danger"})})}}),$("#btn-forgotpass").on("click",function(a){a.preventDefault(),Swal.fire({title:"LUPA PASSWORD?",input:"text",inputAttributes:{autocapitalize:"off"},html:"<p class='mb-4'>masukan email yang terdaftar. kami akan mengirim password anda melalui email</p>",footer:'<a href="https://wa.me/628569886410?text=Hallo%20Admin,%20saya%20ada%20kendala%20mengenai%20password">hubungi admin</a>',showCancelButton:!0,confirmButtonText:"submit",showLoaderOnConfirm:!0,preConfirm:a=>{let e=new FormData;return e.append("email",a),axios.post(`${APIURL}/login/forgotpass`,e,{headers:{}}).then(()=>{Swal.fire({icon:"success",title:"success!",text:"password sudah dikirim ke email anda. silahkan cek email",showConfirmButton:!0})}).catch(a=>{404==a.response.status?Swal.showValidationMessage(a.response.data.messages):500==a.response.status&&Swal.showValidationMessage("terjadi kesalahan, coba sekali lagi")})},allowOutsideClick:()=>!Swal.isLoading()})}),$("#formLoginAdmin").on("submit",function(a){if(a.preventDefault(),doValidateAdmin()){showLoadingSpinner();let e=new FormData(a.target);axios.post(`${APIURL}/login/admin`,e,{headers:{}}).then(a=>{hideLoadingSpinner();let e=`${BASEURL}/admin`;""!=LASTURL&&"null"!=LASTURL&&null!=LASTURL&&(e=LASTURL),document.cookie=`token=${a.data.token}; path=/;SameSite=None; Secure`,window.location.replace(e)}).catch(a=>{hideLoadingSpinner(),401==a.response.status?showAlert({message:"<strong>Maaf . . .</strong> akun anda sedang di Non-aktifkan!",autohide:!0,type:"warning"}):404==a.response.status?a.response.data.messages.username?($("#admin-username").addClass("is-invalid"),$("#admin-username-error").text(a.response.data.messages.username)):a.response.data.messages.password&&($("#admin-password").addClass("is-invalid"),$("#admin-password-error").text(a.response.data.messages.password)):500==a.response.status&&showAlert({message:"<strong>Ups . . .</strong> terjadi kesalahan, coba sekali lagi!",autohide:!0,type:"danger"})})}});